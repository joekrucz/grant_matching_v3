{% extends 'base.html' %}

{% block title %}Cookie Policy - Trellis{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">Cookie Policy</h1>
    
    <div class="prose prose-lg max-w-none">
        <p class="text-base-content/70 mb-6">
            <strong>Last Updated:</strong> {{ "now"|date:"F d, Y" }}
        </p>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">1. What Are Cookies?</h2>
            <p class="mb-4">
                Cookies are small text files that are placed on your computer or mobile device when you visit a website. 
                They are widely used to make websites work more efficiently and provide information to the website owners.
            </p>
            <p class="mb-4">
                Cookies allow a website to recognize your device and store some information about your preferences or past actions. 
                This helps us provide you with a better experience when you browse our website and also allows us to improve our services.
            </p>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">2. How We Use Cookies</h2>
            <p class="mb-4">
                Trellis uses cookies to:
            </p>
            <ul class="list-disc list-inside mb-4 space-y-2 ml-4">
                <li>Keep you signed in to your account</li>
                <li>Remember your preferences and settings</li>
                <li>Protect your security by preventing cross-site request forgery (CSRF) attacks</li>
                <li>Improve website functionality and user experience</li>
            </ul>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">3. Types of Cookies We Use</h2>
            
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-3">Essential Cookies (Strictly Necessary)</h3>
                <p class="mb-4">
                    These cookies are essential for the website to function properly. They enable core functionality such as 
                    security, network management, and accessibility. You cannot opt-out of these cookies.
                </p>
                
                <div class="bg-base-200 rounded-lg p-4 mb-4">
                    <h4 class="font-semibold mb-2">Session Cookies</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm ml-4">
                        <li><strong>Purpose:</strong> Maintain your login session and authentication state</li>
                        <li><strong>Duration:</strong> 7 days or until you log out</li>
                        <li><strong>Type:</strong> First-party, HTTP-only, Secure (in production)</li>
                        <li><strong>Name:</strong> <code>sessionid</code></li>
                    </ul>
                </div>

                <div class="bg-base-200 rounded-lg p-4 mb-4">
                    <h4 class="font-semibold mb-2">CSRF Protection Cookies</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm ml-4">
                        <li><strong>Purpose:</strong> Protect against cross-site request forgery attacks when submitting forms</li>
                        <li><strong>Duration:</strong> Session-based (expires when you close your browser)</li>
                        <li><strong>Type:</strong> First-party, HTTP-only, Secure (in production)</li>
                        <li><strong>Name:</strong> <code>csrftoken</code></li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">4. Cookie Settings and Management</h2>
            <p class="mb-4">
                You can manage your cookie preferences directly on Trellis or through your browser settings. Here's how:
            </p>
            
            <div class="mb-4">
                <h3 class="text-xl font-semibold mb-2">Cookie Preferences on Trellis</h3>
                <p class="mb-2">
                    We provide a <a href="{% url 'grants:cookie_preferences' %}" class="link link-primary">Cookie Preferences</a> page 
                    where you can view and manage your cookie settings. You can access it at any time from the footer of any page.
                </p>
                <p class="mb-2">
                    On the Cookie Preferences page, you can:
                </p>
                <ul class="list-disc list-inside space-y-1 ml-4 mb-4">
                    <li>View which cookies are currently active</li>
                    <li>Understand what each cookie does</li>
                    <li>Manage preferences for future non-essential cookies (analytics, marketing)</li>
                    <li>See information about essential cookies that cannot be disabled</li>
                </ul>
                <div class="alert alert-info mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>
                        <a href="{% url 'grants:cookie_preferences' %}" class="link link-primary font-semibold">Manage your cookie preferences now</a>
                    </span>
                </div>
            </div>
            
            <div class="mb-4">
                <h3 class="text-xl font-semibold mb-2">Browser Settings</h3>
                <p class="mb-2">
                    You can also set your browser to refuse all cookies or to indicate when a cookie is being sent. However, 
                    if you do not accept cookies, you may not be able to use some portions of our service.
                </p>
                <p class="mb-2">
                    Instructions for managing cookies in popular browsers:
                </p>
                <ul class="list-disc list-inside space-y-1 ml-4 mb-4">
                    <li><strong>Chrome:</strong> Settings → Privacy and security → Cookies and other site data</li>
                    <li><strong>Firefox:</strong> Options → Privacy & Security → Cookies and Site Data</li>
                    <li><strong>Safari:</strong> Preferences → Privacy → Cookies and website data</li>
                    <li><strong>Edge:</strong> Settings → Cookies and site permissions → Cookies and site data</li>
                </ul>
            </div>

            <div class="mb-4">
                <h3 class="text-xl font-semibold mb-2">Deleting Cookies</h3>
                <p class="mb-2">
                    You can delete cookies that are already on your device. If you delete cookies, you may need to sign in 
                    again to access certain features of Trellis.
                </p>
            </div>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">5. Third-Party Cookies</h2>
            <p class="mb-4">
                Currently, Trellis does not use third-party cookies for advertising or tracking purposes. All cookies used 
                on our website are first-party cookies that we set directly.
            </p>
            <p class="mb-4">
                If we introduce third-party services in the future that use cookies (such as analytics or advertising), 
                we will update this Cookie Policy to inform you about them.
            </p>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">6. Cookie Security</h2>
            <p class="mb-4">
                We take the security of your data seriously. Our cookies are configured with the following security features:
            </p>
            <ul class="list-disc list-inside mb-4 space-y-2 ml-4">
                <li><strong>HttpOnly:</strong> Cookies cannot be accessed by JavaScript, protecting against XSS attacks</li>
                <li><strong>Secure:</strong> In production, cookies are only sent over HTTPS connections</li>
                <li><strong>SameSite:</strong> Set to "Lax" to help prevent CSRF attacks while allowing normal navigation</li>
            </ul>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">7. Changes to This Cookie Policy</h2>
            <p class="mb-4">
                We may update this Cookie Policy from time to time to reflect changes in our practices or for other operational, 
                legal, or regulatory reasons. We will notify you of any material changes by posting the updated Cookie Policy 
                on this page and updating the "Last Updated" date.
            </p>
            <p class="mb-4">
                We encourage you to review this Cookie Policy periodically to stay informed about how we use cookies.
            </p>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">8. Your Rights</h2>
            <p class="mb-4">
                Under UK GDPR and EU GDPR, you have certain rights regarding cookies and your personal data:
            </p>
            <ul class="list-disc list-inside mb-4 space-y-2 ml-4">
                <li>The right to be informed about the use of cookies (this policy)</li>
                <li>The right to access information about cookies we use</li>
                <li>The right to control cookie settings through your browser</li>
                <li>The right to delete cookies at any time</li>
            </ul>
            <p class="mb-4">
                For more information about how we handle your personal data, please refer to our Privacy Policy.
            </p>
        </section>

        <section class="mb-8">
            <h2 class="text-2xl font-semibold mb-4">9. Contact Us</h2>
            <p class="mb-4">
                If you have any questions about our use of cookies or this Cookie Policy, please contact us through the 
                contact methods provided in your account settings or on our website.
            </p>
        </section>

        <div class="mt-12 pt-8 border-t border-base-300">
            <p class="text-base-content/70">
                By continuing to use Trellis, you consent to our use of cookies as described in this Cookie Policy.
            </p>
        </div>
    </div>
</div>
{% endblock %}

